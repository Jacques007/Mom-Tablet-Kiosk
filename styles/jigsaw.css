
:root{
  --bg:#f6f7fb; --panel:#ffffff; --text:#222; --accent:#2a7ae4; --good:#2e7d32; --muted:#666;
  --gap:.6rem; --radius:14px; --cols:4; --rows:3;
}
html,body{background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",Arial,sans-serif; margin:0}
.wrap{max-width:980px; margin:0 auto; padding:1.5rem}
header{text-align:center; margin-bottom:.5rem}
header h1{font-size:clamp(1.25rem,2.2vw,1.7rem); margin:.25rem 0}
header p{margin:0; color:#444}

.panel{background:var(--panel); border-radius:var(--radius); box-shadow:0 2px 10px rgba(0,0,0,.08); padding:1rem}
.controls{display:flex; flex-wrap:wrap; gap:.6rem; justify-content:center; margin:0 0 1rem}
.btn{padding:.8rem 1.1rem; border:none; border-radius:12px; color:#fff; background:var(--accent); cursor:pointer; font-size:1.05rem; min-width:150px; box-shadow:0 2px 6px rgba(0,0,0,.12)}
.btn.secondary{background:#4a4a4a}
.btn.success{background:var(--good)}
.toggle{display:flex; align-items:center; gap:.5rem; font-size:1rem; color:#333}
.small{font-size:.95rem; color:var(--muted); text-align:center; margin-top:.25rem}

.layout{display:grid; grid-template-columns:1fr 320px; gap:1rem}
@media (max-width:860px){ .layout{grid-template-columns:1fr} }

/* Board */
.boardWrap{position:relative}
.board{
  width:min(92vw, 640px);
  margin:0 auto;
  background:#e9edf5;
  border-radius:var(--radius);
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.06);
  overflow:hidden;
  aspect-ratio: 4 / 3; /* updated by JS after image load */
  display:grid;
  grid-template-columns:repeat(var(--cols), 1fr);
  grid-template-rows:repeat(var(--rows), 1fr);
  gap:var(--gap);
  padding:var(--gap);
}
.cell{
  border-radius:12px;
  background:#f0f3f8;
  box-shadow:inset 0 0 0 2px rgba(0,0,0,.06);
  position:relative;
  min-height:80px;
}
.cell .piece{ /* when placed */
  width:100%; height:100%;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.12);
  transition:transform .12s ease;
}
.cell:focus-within{outline:4px solid rgba(42,122,228,.25)}
.guide{
  position:absolute; inset:0;
  opacity:.18; pointer-events:none; border-radius:var(--radius);
  background-size:cover; background-position:center;
}

/* Tray */
.tray{
  background:#f0f3f8; border-radius:var(--radius); box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);
  padding:.7rem; display:flex; flex-wrap:wrap; gap:.6rem; align-content:flex-start; justify-content:center;
  min-height:220px;
}
.piece{
  width:140px; height:110px;
  border-radius:12px; background-color:#ddd; background-repeat:no-repeat;
  background-size:calc(var(--cols)*100%) calc(var(--rows)*100%);
  box-shadow:0 2px 6px rgba(0,0,0,.12);
  cursor:pointer; outline:none; border:none;
}
.piece.selected{box-shadow:0 0 0 4px rgba(42,122,228,.35)}
.piece:focus-visible{box-shadow:0 0 0 4px rgba(42,122,228,.35)}
.status{text-align:center; margin-top:.6rem; font-size:1.05rem}
.status.good{color:var(--good)}
.status.neutral{color:#333}
